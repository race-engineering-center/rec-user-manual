# Клиент Garage61

Это окно позволяет получить доступ к кругам из онлайн платформы [Garage61](https://garage61.net). Вы можете 
просматривать, искать и загружать круги непосредственно в Analyzer для анализа и сравнения.

В настоящее время доступны только ваши круги и круги ваших тиммейтов из-за ограничений API Garage61. Подробнее см. 
в [документации API Garage61](https://garage61.net/developer/endpoints/v1/findLaps).

!!! note 

    Для своих сессий лучше импортировать круги напрямую из файлов `.ibt` по возможности — они содержат 
    значительно больше данных, чем Garage61.

![Окно клиента Garage61](img/g61_overview.png "Окно клиента Garage61")

## Основная панель инструментов

![Обзор панели инструментов Garage61](img/g61_toolbar_marks.png "Обзор панели инструментов Garage61")

1. Авторизация
2. Обновить метаданные
3. Обновить круги (см. ниже)
4. Скачать выбранные круги
5. Показать только персональные лучшие круги (переключатель)
6. Показать только круги из текущего сезона iRacing (переключатель)

## Авторизация

REC использует OAuth2 для доступа к данным Garage61. OAuth2 — это безопасный протокол авторизации: REC никогда не 
видит и не хранит ваш пароль Garage61. Аутентификация происходит через сайт Garage61, и REC получает только временный 
токен для доступа к вашим данным.

Чтобы проверить, авторизован ли клиент для доступа к данным Garage61, проверьте правый нижний угол окна. Если 
там написано "Status: Authorized", всё готово. Если нет, нажмите кнопку "Authorize" на основной панели 
инструментов. Откроется окно браузера с запросом на предоставление REC доступа к данным Garage61:

![Запрос OAuth2 Garage61](img/g61_oauth_prompt.png "Запрос OAuth2 Garage61")

Убедитесь, что опция "Read your driving data and that of your teammates" отмечена. После нажатия синей кнопки 
"Authorize" появится страница, подтверждающая успешную авторизацию. Теперь вы можете просматривать и скачивать 
круги из Garage61:

![Успешная авторизация OAuth2 Garage61](img/g61_oauth_success.png "Успешная авторизация OAuth2 Garage61")

## Выбор и загрузка кругов

Дерево фильтров в левой части окна показывает все доступные машины, трассы и пилотов. Вы можете искать машины, трассы 
и пилотов с помощью поля поиска вверху:

![Поиск по фильтрам Garage61](img/g61_filters_search.png "Поиск по фильтрам Garage61")

1. Выберите трассу из списка доступных трасс. Обратите внимание, что можно выбрать только одну трассу;
2. Выберите любое количество машин из списка доступных машин;
3. Выберите любое количество пилотов из списка доступных пилотов;
4. При желании отметьте "Only include personal best laps", чтобы включить только персональные лучшие круги;
5. Нажмите "Update laps". Будет загружена информация о кругах, и вы сможете выбрать, какие именно круги скачать 
для анализа;
6. Выберите круги, которые хотите скачать, и нажмите "Download selected laps";

REC запросит эти круги у Garage61 и загрузит их в вашу локальную библиотеку кругов. Теперь вы можете загрузить их в 
Analyzer для анализа как обычно (подробнее см. в разделе [Библиотека кругов](laplibrary.ru.md##loading-laps-for-analysis)).

![Загрузка кругов из Garage61](img/g61_client_workflow.gif "Загрузка кругов из Garage61")
